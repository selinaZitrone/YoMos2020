<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Sebastian Hanß and Selina Baldauf" />
  <title>Clear, reproducible and robust R code</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
  <script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
  <script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
  <script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
  <link href="site_libs/slidy-2/styles/slidy.css" rel="stylesheet" />
  <script src="site_libs/slidy-2/scripts/slidy.js"></script>
  <script src="site_libs/slidy_shiny-1/slidy_shiny.js"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Clear, reproducible and robust R code</h1>
  <p class="author">
Sebastian Hanß and Selina Baldauf
  </p>
  <p class="date">24 May, 2020</p>
</div>
<div id="workshop-overview" class="slide section level2">
<h1>Workshop overview</h1>
<h3 id="motivation">Motivation</h3>
<ul>
<li>reproducibility</li>
<li>transparency</li>
<li>good coding practice</li>
</ul>
<h3 id="what-will-you-learn">What will you learn?</h3>
<ul>
<li>clear project structure</li>
<li>good programming practice
<ul>
<li>unit testing</li>
<li>CI with github Actions</li>
</ul></li>
<li>holepunch</li>
<li>code on github. <a href="https://github.com/selinaZitrone/YoMos2020">https://github.com/selinaZitrone/YoMos2020</a></li>
</ul>
</div>
<div id="clear-project-structure" class="slide section level2">
<h1>Clear project structure</h1>
<ul>
<li><p>follow the conventions of your research community / lab</p></li>
<li><p>clear separation of data, method and output</p></li>
<li><p>specify the computational environment</p></li>
<li><p>adapt R package stucture for your research compendia</p></li>
</ul>
<h3 id="advantages">Advantages</h3>
<ul>
<li>benefit from quality control mechanisms needed to build your R package (<code>R CMD check</code>)</li>
<li>writing functions is less error prone</li>
<li>functions can be easily documented</li>
</ul>
</div>
<div class="slide section level2">

<div class="left" style="float:left;width:48%">
<div class="figure">
<img src="images/research_compendium.PNG" alt="" />
<p class="caption">Mavick et al. 2018</p>
</div>
</div>
<div class="right" style="float:right;width:48%">
<ul>
<li>other packages generating empty project directory structures:
<ul>
<li>ProjectTemplate</li>
<li>prodigenr</li>
<li>workflowr</li>
</ul></li>
</ul>
</div>
</div>
<div id="unit-testing" class="slide section level2 smaller">
<h1>Unit testing</h1>
<ul>
<li>test individual units of source code to see if it is fit for use</li>
</ul>
<h3 id="why">Why?</h3>
<ul>
<li>Fewer bugs</li>
<li>Better code structure</li>
<li>Easier to pick up where you left</li>
<li>Robust code</li>
<li>You can rerun your tests at anytime to make sure you did not break anything</li>
</ul>
<h3 id="how">How?</h3>
<ul>
<li>Test external interfaces of functions</li>
<li>One test for each behaviour</li>
<li>Test fragile, complicated code</li>
<li>Write a test if you find a but</li>
<li>Test-first philosophy: write the test first, then write the code to pass it</li>
<li>in R: <code>testthat</code> package (Hadley Wickham)</li>
</ul>
</div>
<div id="continous-integration-ci" class="slide section level2">
<h1>Continous integration (CI)</h1>
<div class="left" style="float:left;width:48%">
<blockquote>
<p>“If it hurts, do it more often” (Martin Fowler)</p>
</blockquote>
<p><img src="images/pain_vs_time_ci.png" /></p>
</div>
<div class="right" style="float:right;width:48%">
<h3 id="idea">Idea</h3>
<ul>
<li>shared code repository (e.g. on github)</li>
<li>integrate code frequently (every day) to the shared</li>
<li>automated builds and tests after each commit</li>
<li>code is only accepted if it builds and passes the test</li>
<li>everyone can see the results of the lates commit</li>
</ul>
</div>
</div>
<div class="slide section level2">

<h3 id="why-1">Why?</h3>
<ul>
<li><p>smaller changes are easier to handle</p></li>
<li><p>get quick and frequent feedback</p></li>
<li><p>early bug detection</p></li>
<li><p>constant availability of current code version</p></li>
<li><p>if you have to revert the codebase due to bugs you won’t lose that much</p></li>
<li><p>However, can be time consuming and might be overkill for small or solo projects</p></li>
</ul>
</div>
<div id="github-actions-for-ci" class="slide section level2">
<h1>Github Actions for CI</h1>
<ul>
<li>supports mac-OS, windows, linux, docker containers</li>
<li>integration with github, so no seperate setup and authentification</li>
<li>free for open source, academic or educational repos</li>
<li>20 concurrent jobs (40 with pro), 6 h per job, 72 h per workflow</li>
<li>self host to remove the per job limit</li>
<li>very easy to setup with R using the <code>usethis</code> package</li>
</ul>
</div>
<div id="reproducibility-and-accessaiblity" class="slide section level2">
<h1>Reproducibility and Accessaiblity</h1>
<p><a href="https://karthik.github.io/holepunch/">Holepunch</a></p>
</div>
<div id="resources" class="slide section level2">
<h1>Resources</h1>
<h3 id="project-structures">Project structures</h3>
<h3 id="unit-testing-1">Unit testing</h3>
<ul>
<li><a href="https://katherinemwood.github.io/post/testthat/">Intro to unit testing in R</a></li>
<li>Testing with <a href="http://r-pkgs.had.co.nz/tests.html"><code>testthat</code></a></li>
</ul>
<h3 id="ci-with-github-actions">CI with github actions</h3>
<ul>
<li>Jim Hester on <a href="https://rstudio.com/resources/rstudioconf-2020/azure-pipelines-and-github-actions/">GitHub Actions with R</a></li>
<li><a href="https://help.github.com/en/actions/getting-started-with-github-actions">Getting started</a> with GitHub Actions</li>
<li><a href="https://github.com/r-lib/actions">Examples</a> for Actions with R</li>
</ul>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
